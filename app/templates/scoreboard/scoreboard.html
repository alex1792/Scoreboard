{% extends "base.html" %}

{% block title %}
Scoreboard
{% endblock %}

{% block header %}
<h2>Scoreboard Page</h2>
{% endblock %}

{% block content %}
<div class="scoreboard-container">
    <!-- Match Info -->
    <div class="match-info">
        <p><strong>{{ player1_name }}</strong> vs <strong>{{ player2_name }}</strong></p>
    </div>

    <!-- Scores -->
    <div class="scores">
        <div class="score-container">
            <span id="player1-score" class="score">{{ score1 }}</span>
            <span class="separator">-</span>
            <span id="player2-score" class="score">{{ score2 }}</span>
        </div>
    </div>

    {% if current_user.is_judge %}
    <!-- Buttons -->
    <div class="button-container">
        <!-- Player1 Buttons -->
        <div class="button-group">
            <form action="/update_score" method="post">
                <input type="hidden" name="player" value="Player1">
                <input type="hidden" name="score" value="1">
                <button type="submit" class="btn btn-add">Player1 +1</button>
            </form>
            <form action="/update_score" method="post">
                <input type="hidden" name="player" value="Player1">
                <input type="hidden" name="score" value="-1">
                <button type="submit" class="btn btn-minus">Player1 -1</button>
            </form>
        </div>

        <!-- Player2 Buttons -->
        <div class="button-group">
            <form action="/update_score" method="post">
                <input type="hidden" name="player" value="Player2">
                <input type="hidden" name="score" value="1">
                <button type="submit" class="btn btn-add">Player2 +1</button>
            </form>
            <form action="/update_score" method="post">
                <input type="hidden" name="player" value="Player2">
                <input type="hidden" name="score" value="-1">
                <button type="submit" class="btn btn-minus">Player2 -1</button>
            </form>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='scoreboard.js') }}"></script>
<script>
// Custom JavaScript for scoreboard page
socket.on('score_update', (data) => {
    document.getElementById('player1-score').textContent = data.score1;
    document.getElementById('player2-score').textContent = data.score2;
});
</script>
{% endblock %}
